diff --git a/pkgs/tools/misc/daemontools/compile.patch b/pkgs/tools/misc/daemontools/compile.patch
new file mode 100644
index 0000000..2568a8b
--- /dev/null
+++ b/pkgs/tools/misc/daemontools/compile.patch
@@ -0,0 +1,12 @@
+--- daemontools.orig/src/Makefile	2001-07-12 18:49:49.000000000 +0200
++++ daemontools/src/Makefile	2013-09-24 17:11:35.660975053 +0200
+@@ -165,8 +165,7 @@
+ 
+ hasshsgr.h: chkshsgr choose compile hasshsgr.h1 hasshsgr.h2 load \
+ tryshsgr.c warn-shsgr
+-	./chkshsgr || ( cat warn-shsgr; exit 1 )
+-	./choose clr tryshsgr hasshsgr.h1 hasshsgr.h2 > hasshsgr.h
++	cat hasshsgr.h1 > hasshsgr.h
+ 
+ haswaitp.h: choose compile haswaitp.h1 haswaitp.h2 load trywaitp.c
+ 	./choose cl trywaitp haswaitp.h1 haswaitp.h2 > haswaitp.h
diff --git a/pkgs/tools/misc/daemontools/default.nix b/pkgs/tools/misc/daemontools/default.nix
index 579d364..7eeb9fe 100644
--- a/pkgs/tools/misc/daemontools/default.nix
+++ b/pkgs/tools/misc/daemontools/default.nix
@@ -19,6 +19,12 @@ in stdenv.mkDerivation rec {
   ];
   sourceRoot = "admin/${pkg}-${ver}";
 
+  patches = [
+    # Avoid need to have secondary groups for compilation
+    # Install dnsroots.global into $out/etc
+    ./compile.patch
+  ];
+
   buildInputs = [dietlibc];
 
   configurePhase = ''
