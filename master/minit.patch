minit-0.10: a small yet feature-complete init

diff --git a/pkgs/os-specific/linux/minit/default.nix b/pkgs/os-specific/linux/minit/default.nix
new file mode 100644
index 0000000..dcb75ee
--- /dev/null
+++ b/pkgs/os-specific/linux/minit/default.nix
@@ -0,0 +1,50 @@
+{ stdenv, fetchurl, dietlibc, libowfat }:
+
+let
+  pkg = "minit";
+  ver = "0.10";
+  homepage = http://www.fefe.de/minit;
+in stdenv.mkDerivation rec {
+  name = "${pkg}-${ver}";
+
+  srcs = [
+    (fetchurl {
+      url = "http://dl.fefe.de/${name}.tar.bz2";
+      sha256 = "1kgsvn173i84zbyw108cvnn90xkf6s4y83xiwvbjh66s89ir4xp9";
+    })
+    (fetchurl {
+      url = http://icculus.org/~boris/data/minit-scripts.tar.bz2;
+      sha256 = "1krfkkmd9dxk2cxdr5drbp0b3jabzp9jambzlayd4888dv7x7v1q";
+    })
+  ];
+
+  sourceRoot = name;
+
+  buildInputs = [dietlibc libowfat];
+
+  installPhase = ''
+    make install-files DESTDIR=$out
+    install -m 700 killall5 $out/sbin/killall5.minit
+    mv $out/sbin/shutdown $out/sbin/shutdown.minit
+    rm $out/sbin/init
+    mkdir $out/share
+    mv $NIX_BUILD_TOP/${pkg}-scripts $out/share
+  '';
+
+  allowedReferences = ["out"];
+  dontStrip = true; # diet does not need stripping
+  dontPatchELF = true; # we produce static binaries
+  dontPatchShebangs = true; # example scripts don't need it
+
+  meta = {
+    description = "a small yet feature-complete init";
+    homepage = homepage;
+    license = stdenv.lib.licenses.gpl2;
+    platforms = stdenv.lib.platforms.linux;
+    maintainers = with stdenv.lib.maintainers; [ tzeman ];
+  };
+
+}
+
+# vim: et ts=2 sw=2 
+
diff --git a/pkgs/top-level/all-packages.nix b/pkgs/top-level/all-packages.nix
index 0fffc06..8a60647 100644
--- a/pkgs/top-level/all-packages.nix
+++ b/pkgs/top-level/all-packages.nix
@@ -6732,6 +6732,8 @@ let
 
   mingetty = callPackage ../os-specific/linux/mingetty { };
 
+  minit = callPackage ../os-specific/linux/minit { };
+
   module_init_tools = callPackage ../os-specific/linux/module-init-tools { };
 
   mountall = callPackage ../os-specific/linux/mountall { };
